<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cash and Carry</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100">

    <nav class="bg-blue-500 p-4 text-white">
        <div class="container mx-auto flex justify-between">
            <h1 class="text-2xl">Cash & Carry</h1>
            <div>
                <button id="login-nav" class="px-4 py-2 rounded hover:bg-blue-600">Login</button>
                <button id="inventory-nav" class="px-4 py-2 rounded hover:bg-blue-600 hidden">Inventory</button>
                <button id="add-item-nav" class="px-4 py-2 rounded hover:bg-blue-600 hidden">Add Item</button>
                <button id="checkout-nav" class="px-4 py-2 rounded hover:bg-blue-600 hidden">Checkout</button>
                <button id="sign-out-btn" class="px-4 py-2 rounded hover:bg-red-600 hidden">Sign Out</button>
            </div>
        </div>
    </nav>

    <main id="main-container" class="container mx-auto p-4">
        <section id="login-screen">
            <h2 class="text-2xl mb-4">Login</h2>
            <div class="bg-white p-8 rounded-lg shadow-md w-full max-w-md">
                <div class="mb-4">
                    <label for="email" class="block text-gray-700 text-sm font-bold mb-2">Email</label>
                    <input type="email" id="email" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                </div>
                <div class="mb-6">
                    <label for="password" class="block text-gray-700 text-sm font-bold mb-2">Password</label>
                    <input type="password" id="password" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline">
                </div>
                <div class="flex items-center justify-between">
                    <button id="sign-in-btn" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline">
                        Sign In
                    </button>
                    <button id="sign-up-btn" class="bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline">
                        Sign Up
                    </button>
                </div>
            </div>
        </section>

        <section id="inventory-grid" class="hidden">
            <h2 class="text-2xl mb-4">Inventory</h2>
            <p>Inventory grid will go here.</p>
        </section>

        <section id="add-item-form" class="hidden">
            <h2 class="text-2xl mb-4">Add New Item</h2>
            <p>Form to add a new item will go here.</p>
        </section>

        <section id="checkout-screen" class="hidden">
            <h2 class="text-2xl mb-4">Checkout</h2>
            <p>Checkout screen will go here.</p>
        </section>
    </main>

    <script type="module">
        import { auth } from './app.js';
        import { signUp, signIn } from './auth.js';
        import { onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-auth.js";

        const sections = {
            'login-nav': 'login-screen',
            'inventory-nav': 'inventory-grid',
            'add-item-nav': 'add-item-form',
            'checkout-nav': 'checkout-screen'
        };

        const navButtons = document.querySelectorAll('nav button');
        const contentSections = document.querySelectorAll('main section');

        const loginNav = document.getElementById('login-nav');
        const inventoryNav = document.getElementById('inventory-nav');
        const addItemNav = document.getElementById('add-item-nav');
        const checkoutNav = document.getElementById('checkout-nav');
        const signOutBtn = document.getElementById('sign-out-btn');

        function showSection(sectionId) {
            contentSections.forEach(section => {
                if (section.id === sectionId) {
                    section.classList.remove('hidden');
                } else {
                    section.classList.add('hidden');
                }
            });
        }

        navButtons.forEach(button => {
            button.addEventListener('click', () => {
                const sectionId = sections[button.id];
                if (sectionId) {
                    showSection(sectionId);
                }
            });
        });

        const emailInput = document.getElementById('email');
        const passwordInput = document.getElementById('password');
        const signUpBtn = document.getElementById('sign-up-btn');
        const signInBtn = document.getElementById('sign-in-btn');

        signUpBtn.addEventListener('click', () => {
            signUp(emailInput.value, passwordInput.value);
        });

        signInBtn.addEventListener('click', () => {
            signIn(emailInput.value, passwordInput.value);
        });

        signOutBtn.addEventListener('click', () => {
            signOut(auth);
        });

        onAuthStateChanged(auth, user => {
            if (user) {
                showSection('inventory-grid');
                loginNav.classList.add('hidden');
                inventoryNav.classList.remove('hidden');
                addItemNav.classList.remove('hidden');
                checkoutNav.classList.remove('hidden');
                signOutBtn.classList.remove('hidden');
            } else {
                showSection('login-screen');
                loginNav.classList.remove('hidden');
                inventoryNav.classList.add('hidden');
                addItemNav.classList.add('hidden');
                checkoutNav.classList.add('hidden');
                signOutBtn.classList.add('hidden');
            }
        });
    </script>

</body>
</html>
